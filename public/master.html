<!doctype html>
<html>
	<head>
    	<title></title>
 	</head>
	<body>

		<a href="javascript:void(0);" id="connectionHint" style="display:none;" target="_blank">Bitte weiteren Client connected!</a>
		<h1 id="upload" style="display:none;">Es weiterer Client ist connected, super!</h1>

    	<script src="//cdnjs.cloudflare.com/ajax/libs/zepto/1.1.4/zepto.min.js"></script>
    	<script src="/socket.io/socket.io.js"></script>
		<script>
			$(document).ready(function() {
				var socket = io(),
					clientID = null,
					connectionHint = $('#connectionHint');

				socket.emit( 'addMasterUser', clientID );

				socket.on('masterUserAdded', function(socketID) {
					if ( !clientID ) {
						clientID = socketID;

						connectionHint.attr('href', location.href + 'connectSlaveUser?socketID=' + clientID);
						connectionHint.show();
					}
				});

				socket.on('slaveUserConnected', function() {
					connectionHint.hide();
					$('#upload').show();
				});
			});
		</script>
	</body>
</html>